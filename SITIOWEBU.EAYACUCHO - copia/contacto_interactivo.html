<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Escríbenos! — Contacto Interactivo</title>
    <meta name="description" content="Una experiencia interactiva para contactar al Colegio Gran Mariscal de Ayacucho de Catavi.">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* CSS ESPECÍFICO PARA LA PÁGINA INTERACTIVA (Full Screen 3D) */
        body {
            /* ESTILOS DE FONDO AZUL METÁLICO (NUEVO) */
            margin: 0;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Degradado azul oscuro/gris metálico */
            background: linear-gradient(135deg, #1A374D, #244C6A, #1A374D); 
            color: white;
            font-family: 'Inter', sans-serif;
            text-align: center;
        }

        /* Ocultar HEADER y FOOTER para una experiencia 3D inmersiva */
        header, footer {
            display: none;
        }

        /* Canvas de Three.js */
        canvas {
            display: block;
            position: fixed; 
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1; 
        }

        /* Contenido superpuesto (Overlay) */
        .overlay-content {
            position: relative;
            z-index: 10;
            padding: 2rem;
            max-width: 90%;
            /* Fondo de overlay más oscuro que simula el metal */
            background: rgba(18, 41, 60, 0.9); 
            backdrop-filter: blur(8px); 
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            animation: fadeIn 1.5s ease-out;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
            border: 2px solid #5D8AA8; /* Borde de acento (Azul Acerado) */
        }
        .overlay-content:hover {
            transform: scale(1.03); 
        }
        .overlay-content h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            margin-bottom: 0.5rem;
            color: #5D8AA8; /* Título Azul Acerado */
            text-shadow: 0 0 15px rgba(93, 138, 168, 0.7);
        }
        .overlay-content p {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }
        .btn-action {
            display: inline-block;
            background-color: #5D8AA8; /* El mismo Azul Acerado */
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .btn-action:hover {
            background-color: #4A7697;
            transform: scale(1.05);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Responsiveness */
        @media (max-width: 768px) {
            .overlay-content h1 {
                font-size: 2rem;
            }
            .overlay-content p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    
    <div class="overlay-content" onclick="window.location.href='contacto.html'">
        <h1>¿Tienes Preguntas? ¡Contáctanos!</h1>
        <p>Haz clic en este mensaje o el modelo 3D para continuar a nuestro formulario de contacto.</p>
        <a href="contacto.html" class="btn-action">Ir al Formulario de Contacto</a>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
        import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';
        import { gsap } from 'https://cdn.skypack.dev/gsap';

        let scene, camera, renderer, controls;
        let notebook, pencil;
        const pointer = new THREE.Vector2();
        const raycaster = new THREE.Raycaster();

        function init() {
            // Scene
            scene = new THREE.Scene();
            // ¡NUEVO COLOR DE FONDO DE ESCENA 3D!
            scene.background = new THREE.Color(0x182c40); // Tono azul oscuro para que combine

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 3);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            scene.add(ambientLight);

            const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight1.position.set(2, 5, 3);
            scene.add(directionalLight1);

            const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight2.position.set(-2, -5, -3);
            scene.add(directionalLight2);

            // OrbitControls
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 2;
            controls.maxDistance = 5;
            controls.autoRotate = true; 
            controls.autoRotateSpeed = 1.0;

            // --- Crear modelos con primitivas de Three.js ---
            // Cuaderno (varias cajas)
            const notebookGroup = new THREE.Group();

            // Tapa (más grande y oscura, se mantiene azul)
            const coverGeometry = new THREE.BoxGeometry(1.8, 2.5, 0.1);
            const coverMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x3366cc, 
                roughness: 0.6,
                metalness: 0.2
            });
            const cover = new THREE.Mesh(coverGeometry, coverMaterial);
            cover.position.set(0, 0, 0);
            notebookGroup.add(cover);

            // Páginas (blancas)
            const pagesGeometry = new THREE.BoxGeometry(1.7, 2.4, 0.1);
            const pagesMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xffffff, 
                roughness: 0.8,
                metalness: 0.0
            });
            const pages = new THREE.Mesh(pagesGeometry, pagesMaterial);
            pages.position.set(0, 0, 0.06); 
            notebookGroup.add(pages);

            // Espiral (gris metálico)
            const spiralMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xcccccc, 
                roughness: 0.3,
                metalness: 0.9
            });
            for (let i = -1.0; i <= 1.0; i += 0.25) { 
                const spiralRing = new THREE.Mesh(new THREE.TorusGeometry(0.05, 0.02, 8, 16), spiralMaterial);
                spiralRing.rotation.y = Math.PI / 2; 
                spiralRing.position.set(-0.9, i, 0.05);
                notebookGroup.add(spiralRing);
            }
            
            notebookGroup.position.set(-0.5, 0, 0); 
            scene.add(notebookGroup);
            notebook = notebookGroup; 


            // Lápiz (cilindro y cono)
            const pencilGroup = new THREE.Group();

            // Cuerpo del lápiz (amarillo/madera)
            const bodyGeometry = new THREE.CylinderGeometry(0.08, 0.08, 2, 32);
            const bodyMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xedc951, 
                roughness: 0.6,
                metalness: 0.1
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.set(0, 0, 0);
            pencilGroup.add(body);

            // Punta y mina
            const tipGeometry = new THREE.ConeGeometry(0.08, 0.3, 32);
            const tipMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x654321, 
                roughness: 0.8,
                metalness: 0.0
            });
            const tip = new THREE.Mesh(tipGeometry, tipMaterial);
            tip.position.set(0, 1.15, 0);
            pencilGroup.add(tip);

            const leadGeometry = new THREE.ConeGeometry(0.03, 0.1, 32);
            const leadMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x222222, 
                roughness: 0.9,
                metalness: 0.0
            });
            const lead = new THREE.Mesh(leadGeometry, leadMaterial);
            lead.position.set(0, 1.3, 0);
            pencilGroup.add(lead);

            // Borrador y metal
            const eraserGeometry = new THREE.CylinderGeometry(0.09, 0.09, 0.2, 32);
            const eraserMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xff9999, 
                roughness: 0.5,
                metalness: 0.0
            });
            const eraser = new THREE.Mesh(eraserGeometry, eraserMaterial);
            eraser.position.set(0, -1.05, 0);
            pencilGroup.add(eraser);

            const metalBandGeometry = new THREE.CylinderGeometry(0.085, 0.085, 0.1, 32);
            const metalBandMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xaaaaaa, 
                roughness: 0.3, 
                metalness: 0.9 
            });
            const metalBand = new THREE.Mesh(metalBandGeometry, metalBandMaterial);
            metalBand.position.set(0, -0.9, 0);
            pencilGroup.add(metalBand);


            pencilGroup.rotation.z = Math.PI / 4; 
            pencilGroup.position.set(0.5, 0.5, 0.1); 
            scene.add(pencilGroup);
            pencil = pencilGroup; 

            // Animación flotante de los modelos
            gsap.to(notebook.position, {
                y: 0.1,
                duration: 2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            gsap.to(pencil.position, {
                y: 0.6,
                duration: 2.2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            // Event listener
            window.addEventListener('click', onCanvasClick);
            window.addEventListener('resize', onWindowResize);

            animate();
        }

        function onCanvasClick(event) {
            pointer.x = (event.clientX / window.innerWidth) * 2 - 1;
            pointer.y = - (event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(pointer, camera);
            const intersects = raycaster.intersectObjects([notebook, pencil], true); 

            if (intersects.length > 0) {
                window.location.href = 'contacto.html';
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update(); 
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>